title: Windows 安装 mysql
date: 2016-08-13 17:08:16
tags:
- Web
---
+ 直接在官网下载[msi](http://dev.mysql.com/downloads/installer/)包
+ 配置好环境变量，也就n是将安装目录下的bin目录放到Path路径中。
<!-- more -->
+ 启动服务(配置文件默认使用my.default.ini)
  - mysqld --install
  - mysqld --initialize （初始化得到data）
  - net start/stop mysql
+ 重新选择其他配置文件
  - mysqld --remove
  - mysqld install MYSQL-default-file="目录"(比如我的是`C:\Progam Files(x86)\MySQL Server 5.7\my.ini`)
  - net start mysql
+ 重启mysql
  - 有时mysql instance没有启动，解决的方式是
    * mysqld --remove
    * mysqld --install
    * net start mysql
    * 如果不行的话，就把资源管理器调出，杀死进程里面的mysql服务，再执行一次上面操作就可以了
+ 有时安装完成后会出现mysql无法登录的情况，这种情况主要是在于root用户设置错误，也就是密码问题
  - net stop mysql
  - 查看安装目录下有无my.ini文件，没有的放，可以使用如下配置
  ```
For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.
[client]
port=3306
default-character-set=utf8

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
basedir = C:\Program Files (x86)\MySQL\MySQL Server 5.7
datadir = C:\Program Files (x86)\MySQL\MySQL Server 5.7\data
port = 3306
server_id = 1
# basedir = .....
# datadir = .....
# port = .....
# server_id = .....


# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M 

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
[WinMySQLAdmin]
C:\Program Files (x86)\MySQL\MySQL Server 5.7\bin\mysqld.exe

  ```
  
  - 以上主要的一点在mysqld后面加上了`skip-grant-tables`
  - mysqld --remove
  - mysqld install MYSQL--default-file="C:\Progam Files(x86)\MySQL Server 5.7\my.ini"
  - net start mysql
  - 此时直接mysql就可以进入命令行了
  - 修改root密码，主要是修改对应的user表字段，请注意对于5.7及以上版本，是没有 password字段的，所以使用`update mysql.user set authentication_string=password("123456") where user="root";`
  - 但是这样还要进行一步，因为这样使用root登录的时候会报错`you must reset your password using alter user statemetn before:`,直接在mysql里面，`SET PASSWORD=PASSWORD("123456")`
+ mysql的可视化工具
  - 比较推荐MySQL-Front,操作方便而且免费
+ mysql数据库支持中文
  - 默认的mysql的编码不是utf8，所以无法支持中文存储
  - 解决
    * 修改my.ini文件，然后重启，修改内容为
    ```
[client]
port=3306
default-character-set=utf8

[mysqld]
init_connect='SET collation_connection = utf8_unicode_ci'
init_connect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_unicode_ci 
skip-character-set-client-handshake    
    ```
    * 然后重启mysql `net stop mysql` `net start mysql`
    * 对于已经存在的数据库和表可以如下设置 [auto与product是对应的数据库和表]
      + `ALTER DATABASE auto CHARACTER SET utf8 COLLATE utf8_unicode_ci;`
      + `use auto;`
      + `ALTER TABLE product CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;`